<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="styles/default.css">
</head>
<body>
    <p>
        Draw the following graphics using canvas:
    </p>
    <canvas id='manCanvas' width="255" height="300"></canvas>
    <canvas id='bicycleCanvas' width="355" height="300"></canvas>
    <canvas id='houseCanvas' width="255" height="300"></canvas>
    <script type="text/javascript">
        (function () {
            window.onload = draw;

            function draw() {
                drawHouse();
                drawMan();
                drawBicycle();
            }

            function drawMan() {
                var skinColor = "#90cad7";
                var skinStrokeColor = "#13444f";
                var hatColor = "#396693";
                var hatStrokeColor = "#000000";
                var canvas = document.getElementById('manCanvas');
                var context = canvas.getContext("2d");

                drawEllipse(context, 127, 200, 55, skinColor, 2, skinStrokeColor);

                // mouth
                context.save();
                context.setTransform(1, 0.2, 0, 0.4, 0, 0);
                drawEllipse(context, 112, 500, 20, skinColor, 2, skinStrokeColor);
                context.restore();


                // nose
                drawLine(context, 110, 205, 120, 205, skinStrokeColor);
                drawLine(context, 110, 205, 118, 180, skinStrokeColor);

                // eyeballs
                context.save();
                drawEllipse(context, 125, 440, 10, skinColor, 2, skinStrokeColor, 0.8, 0.4);
                context.restore();
                context.save();
                drawEllipse(context, 170, 440, 10, skinColor, 2, skinStrokeColor, 0.8, 0.4);
                context.restore();

            }

            function drawBicycle() {
                var wheelColor = "#90cad7";
                var linesColor = "#3b91a6";
                var canvas = document.getElementById('bicycleCanvas');
                var context = canvas.getContext("2d");
                var wheelRadius = 45;

                // wheels
                drawEllipse(context, 65, 235, wheelRadius, wheelColor, 3, linesColor);
                drawEllipse(context, 235, 235, wheelRadius, wheelColor, 3, linesColor);

                // body
                drawLine(context, 65, 235, 145, 235, linesColor);
                drawLine(context, 145, 235, 105, 160, linesColor);
                drawLine(context, 145, 235, 227, 180, linesColor);
                drawLine(context, 65, 235, 115, 180, linesColor);
                drawLine(context, 115, 180, 227, 180, linesColor);
                drawLine(context, 235, 235, 220, 145, linesColor);

                // seat
                drawLine(context, 85, 160, 125, 160, linesColor);

                // handlebars
                drawLine(context, 220, 145, 185, 160, linesColor);
                drawLine(context, 220, 145, 245, 120, linesColor);

                // chain & pedals
                drawEllipse(context, 145, 235, 14, null, 3, linesColor);
                drawLine(context, 135, 225, 125, 215, linesColor);
                drawLine(context, 155, 245, 165, 255, linesColor);
            }

            function drawHouse() {
                var backgroundColor = "#975b5b";
                var foregroundColor = "#000000";
                var canvas = document.getElementById('houseCanvas');
                var context = canvas.getContext("2d");

                // house main body
                context.fillStyle = backgroundColor;
                context.fillRect(20, 120, 215, 160);
                context.strokeStyle = foregroundColor;
                context.lineWidth = 2;
                context.strokeRect(20, 120, 215, 160);
                context.fillStyle = foregroundColor;

                // top left window
                context.fillRect(35, 140, 75, 50);

                // top right window
                context.fillRect(140, 140, 75, 50);

                // bottom right window
                context.fillRect(140, 215, 75, 50);

                // top left window separators
                drawLine(context, 72, 140, 72, 190, backgroundColor);
                drawLine(context, 35, 165, 110, 165, backgroundColor);

                // top right window separators
                drawLine(context, 176, 140, 176, 190, backgroundColor);
                drawLine(context, 140, 165, 215, 165, backgroundColor);

                // bottom right window separators
                drawLine(context, 176, 215, 176, 265, backgroundColor);
                drawLine(context, 140, 240, 215, 240, backgroundColor);

                // roof
                context.beginPath();
                context.moveTo(20, 120);
                context.lineTo(127, 20);
                context.lineTo(235, 120);
                context.lineTo(20, 120);
                context.fillStyle = backgroundColor;
                context.fill();
                context.strokeStyle = foregroundColor;
                context.stroke();
                context.closePath();

                // TODO: finish house
            }

            function drawLine(ctx, lineStartingX, lineStartingY, lineEndingX, lineEndingY, lineColor) {
                ctx.beginPath();
                ctx.moveTo(lineStartingX, lineStartingY);
                ctx.lineTo(lineEndingX, lineEndingY);
                ctx.lineWidth = 2;
                ctx.strokeStyle = lineColor;
                ctx.stroke();
                ctx.closePath();
            }

            function drawEllipse(ctx, centerX, centerY, radius, fillColor, strokeWidth, strokeColor, scaleX, scaleY) {
                ctx.beginPath();
                if (scaleX && scaleY) {
                    ctx.scale(scaleX, scaleY);
                }

                ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);

                if (fillColor != null) {
                    ctx.fillStyle = fillColor;
                    ctx.fill();
                }

                

                ctx.lineWidth = strokeWidth;
                ctx.strokeStyle = strokeColor;
                ctx.stroke();
                ctx.closePath();
            }
        })();
    </script>
</body>
</html>
