<html>
<head>
	<title></title>
  <link rel="stylesheet" type="text/css" href="styles/js-console.css">
  <link rel="stylesheet" type="text/css" href="styles/circular.css">
</head>
<body>
<p>
Write a script that creates 5 div elements and moves them in circular path with interval of 100 milliseconds.
</p>
<button onclick="createCircularDivsOnClick()">Create Circular Divs</button>
<input type='text' id='funkynessBallCount' placeholder='enter number of balls'>
<input type='text' id='funkynessDegree' placeholder='enter degree'>
<button onclick="createFunkyCircularDivsOnClick()">Create Funky Circular Divs!</button>
<!--<div id="js-console"></div> -->
<!--<script src="scripts/js-console.js"></script>-->
<div id='ballHolder'></div>
<script type="text/javascript">
    var _startXPosition = 250;
    var _startYPosition = 350;
    var intervalHandle;

    function createCircularDivsOnClick() {
      clearBalls();
      createAndAddCircular(5);
      clearInterval(intervalHandle);
      intervalHandle = setInterval(function() {
        moveDivs();
      }, 100);
    }

    //move all the balls in the area
    function moveDivs() {
       var movingElements = document.getElementsByClassName('circular');
       var currentDegree = 0;
       var elementXPosition = 0;
       var elementYPosition = 0;
       for (var i = 0; i < movingElements.length; i++) {
        currentDegree = parseFloat(movingElements[i].getAttribute('data-degrees'));
        currentDegree = (currentDegree + 1) % 360;
        elementYPosition = parseFloat(movingElements[i].style.left.replace('px',''));
        elementXPosition = parseFloat(movingElements[i].style.top.replace('px',''));
        movingElements[i].style.top = calculateNextPosition(elementXPosition, currentDegree, true);
        movingElements[i].style.left = calculateNextPosition(elementYPosition, currentDegree, false);
        movingElements[i].setAttribute('data-degrees', currentDegree);
       };
    }

    //calculate next x and y position
    function calculateNextPosition(position, degrees, isX) {
      var newPosition = parseFloat(position);
      if (isX) {
        newPosition += Math.cos(degrees*Math.PI/180)
        return newPosition;
      } else {
        newPosition += Math.sin(degrees*Math.PI/180);
        return newPosition;
      }
    }
    
    //clear all the balls
    function clearBalls() {
      document.getElementById('ballHolder').innerHTML = '';
    }

    //From this point one lies the code for the FUNKYNESS
    //and the funky moving balls
    function createFunkyCircularDivsOnClick() {
      clearBalls();
      clearInterval(intervalHandle);
      var funkynessRatio = parseInt(document.getElementById('funkynessDegree').value);
      var funkynessBalls = parseInt(document.getElementById('funkynessBallCount').value);
      createAndAddBalls(funkynessBalls, funkynessRatio);
      intervalHandle = setInterval(function() {
        moveDivs();
      }, 10);
    }

    function createAndAddBalls(numberOfDivs, funkynessRatio) {
      var currentX = _startXPosition;
      var currentY = _startYPosition;
      var degrees = funkynessRatio || 0;
      for (var i = 0; i < numberOfDivs; i++) {
          var newDiv = document.createElement('div');
          newDiv.setAttribute('class', 'circular');
          newDiv.style.top = currentX;
          currentX = +calculateNextPosition(currentX, degrees, true);
          newDiv.style.left = currentY;
          degrees += funkynessRatio || 0;
          currentY = +calculateNextPosition(currentY, degrees, false);
          newDiv.setAttribute('data-degrees', degrees);
          document.getElementById('ballHolder').appendChild(newDiv);
      };
    }
</script>
</body>
</html>